---
template: "post"
date: 2021-02-09
title: "『Webを支える技術』を読んだ"
emoji: 📚
category: "Book"
tags:
---

『[Webを支える技術](https://www.amazon.co.jp/dp/4774142042)』の読書メモです。

# 感想

これからソフトウェアエンジニアとして働くので、Web の技術を概観しておこうと思って読みました。
HTTP や REST に関して基本的な知識が漏れてないかどうかの確認ができたので良かったです。
分量が多くないのでさらっと読めます。

# 読書メモ

## 第1部　Web概論

- HTTP、URI、HTML、ハイパーメディア、分散システム、Webの歴史、RESTについて。
  - Web が普及するまでの流れが読み物としてまとまっていて面白かった。
- REST は以下の特徴を組み合わせたアーキテクチャスタイル
  - クライアント/サーバ
  - ステートレスサーバ
  - キャッシュ
  - 統一インタフェース
  - 階層化システム
  - コードオンデマンド
- Cookie を使ったセッション管理は間違った REST 的には間違った HTTP の拡張と言える。

## 第2部　URI

- [Cool URIs don't change](https://www.w3.org/Provider/Style/URI) という有名なページがある。
  - URI は変わらないべきである。
  - URI はリソースを表現する名詞にするべきである。
- 拡張子でリソースの表現を特定する設計方法がある。
- マトリクス URI を表現する際には、順序が意味を持たない場合にはセミコロンが、順序が意味を保つ場合にはカンマが使われる。

## 第3部　HTTP

- HTTP のメッセージ、メソッド、ステータスコード、ヘッダについて。
- POST と PUT の使い分け
  - POSTでリソースを作成する場合、クライアントはリソースのURIを指定できない。
  - PUTでリソースを作成する場合、リソースのURIはクライアントが決定する。
  - クライアント/サーバ間の結合が密になるため、特別な理由が無い場合はリソースの作成はPOSTで行い、URIもサーバ側で決定する設計がよい。
- 冪等性と安全性について、以下の性質を守るようにメソッドを実装するべき。
  - GET、HEAD は冪等かつ安全。
  - PUT、DELETE は冪等だが安全でない。
  - POST は冪等でも安全でもない。
- 404 Not Fond で返すべき情報を 200 OK を返すようなサービスにしてしまうと、検索エンジンによるインデックス処理が行われてしまうなどの問題が生じる。
  - サービスのメンテ中に 200 を返して、それがインデックスされてしまっている事例を少し前に見た。
- ヘッダ
  - Content-Type ヘッダでメディアタイプを text にした場合、デフォルトの文字エンコーディングが ISO 8859-1 だと定義されているため、意図しない文字化けが起きる可能性がある。charset パラメータを必ず設定するのが望ましい。ただし、ブラウザ実装によって、独自に文字エンコーディングが識別される場合もある。
  - メディアタイプなどは、Accept ヘッダなどを使うことで、クライアントとサーバが交渉して決めることができる（コンテントネゴシエーション）。
  - 動的にサイズが決まるリソースを送る場合には、 Transfer-Encoding ヘッダを指定することで、chunk 分割してデータ転送できる。
  - HTTP ヘッダに関して色々と知らないものがあって勉強になった。

## 第4部　ハイパーメディアフォーマット

- HTML、microformats、Atom、JSON、JSONP について。
- microformats については、2021年現在主流ではないので読み飛ばした。
- JSONP (JSON with Padding)
  - XMLHttpRequest ではクロスドメイン通信ができないが、`<script>` 要素はブラウザのセキュリティ制限を受けないため、 src で指定すると読み込める。
  - オリジナルの JSON をコールバック関数でラップすることでドメインの異なるサーバから JSON を取得できる（当然、信頼できるサーバとの通信に限定して使用するべき）
  - JSONP は使ったことがなかった。

## 第5部　Webサービスの設計

- リソース指向アーキテクチャの設計アプローチ
  1. サービスで提供するデータを特定する。
  2. データをリソースに分ける。
  3. リソースに URI で名前を付ける。
  4. クライアントに提供するリソースの表現を設計する。
  5. リンクとフォームを利用してリソース同士を結びつける。
  6. イベントの標準的なコースを検討する。
  7. エラーについて検討する。
- HTTP で RESTful にトランザクションやロックを実現する手法がある。
  - トランザクションリソースを作成してトランザクション実現する。条件付き PUT、条件付き DELETE を利用して楽観的ロックを実現する。など。
- 関係モデル、オブジェクト指向モデル、情報アーキテクチャからリソースを設計する手法について。

## 付録

- 付録A：ステータスコード一覧
- 付録B：HTTPヘッダ一覧
- 付録C：解説付き参考文献
