---
template: "post"
date: 2020-07-13
title: "『リーダブルコード』を読んだ"
emoji: 📚
category: "Book"
tags:
---

『[リーダブルコード](https://www.amazon.co.jp/dp/4873115655/)』の読書メモです。  
私は訳書を読みましたが、[O'Reilly Online Learning](https://learning.oreilly.com/library/view/the-art-of/9781449318482/)で原著を読めます。

# 感想

「読みやすいコード」の書き方に関するプラクティスで、自分が意識できていないことがあれば、新しく学びたいというモチベーションでこの本を読みました。分量も少なく、読みやすかったです。

読みづらいコードを読んだときに感じる「気持ち悪さ」と、それを改善する方法が、パターンに落とし込まれて上手く言語化されていると感じました。
ある程度コードを書いていると自然と意識してくる類のことが多いですが、パターン化された「良いコード」の書き方を改めて一覧することで、コードを書くときにより意識しやすくなるのかなと思います。

# 読書メモ

## 第一部 表面上の改善

### 名前には適切に情報を詰め込む

- Getのような意味の広い単語ではなく、Fetchのような明確な単語を使う。
  - うっかりすると意味の広い単語を無意識的に使ってしまうので、文脈の中で適切な単語かを省みるようにしたいところ。
- `ServerCanStart()`ではなく`CanListenOnPort()`のように具体的にする。
- スコープを意識して命名する。

### 誤解されない命名を意識する

- begin, endは左閉半開区間が期待される。
- get()やsize()は高速に動作することが期待される。

### 一貫性のある見た目のコードにする

- 同じようなことを複数箇所で行っていたら、そのコードの見た目は同じようなものにする。
- 意味のある段落に分割する。

### 適切なコメントを書く

- ひどいコードをコメントで補っている場合はコードを改善するのが望ましい。
- 自分の考え（コードの意図）やコードの背景をコメントとして書いておく。
- 読み手が疑問に思うところをコメントで説明する。
  - コード自体がロジックの説明をしていれば基本的にコメントが無くてよいはずだが、読み手（未来の自分とか）を信用できなくて、つい冗長なコメントをしてしまうことがある。上手いコメントの残し方がどうにも難しい…

## 第二部 ループとロジックの単純化

### コードのフローを読みやすくする

- 条件式の項の順序や、if/else文のブロックは読みやすいような順序で配置する。
- 目立つ条件は先に処理してしまう。
- 深いネストは読み手の脳のリソースを消費してしまう。ネストは可能な限り浅く保つ。
- コードを変更する際には全体を見る。差分を簡潔に留めるための場当たり的な変更をしない。

### 巨大なコードは分割する

- 式の説明をするような変数や、把握を簡単にするような変数を導入する。
- 複雑な式は、等価で簡潔な式に置き換えてみようとする。

### コードを軽量化する

- 中間変数を削除する。
- イミュータブルな変数を使えば、コードが理解しやすくなる。

## 第三部 コードの再構成

### 無関係の下位問題を抽出する

- 上位の問題と切り離せる下位問題や汎用的な処理は分離する。ただし、やりすぎに注意。

### 一度に１つのことをする

- 小さなタスクを切り出し、それらを分離する。
- 論理的な段落毎にコードをまとめる。

### コードに思いを込める

- プログラムを簡単な言葉で説明することで、コードがより自然になる。

### 短いコードを書く

- 機能を過剰に見積もらない。
  - 無駄に大きく、あるいはメタに作ってしまうことに気をつけたい。
- コードが大きくなるほど、コードにかかる労力も大きくなる。
- 使っていないコードや、不要になった機能は削除する。

## 第四部 選抜テーマ

### テストと読みやすさ

- テストを読みやすくする。
- テストの入力値は最も有効で単純なものにする。
- 新しいテストの追加や修正を簡単にする。
